!function(){"use strict";function e(e){var t;switch(e){case 0:t="January";break;case 1:t="February";break;case 2:t="March";break;case 3:t="April";break;case 4:t="May";break;case 5:t="June";break;case 6:t="July";break;case 7:t="August";break;case 8:t="September";break;case 9:t="October";break;case 10:t="November";break;case 11:t="December";break;default:t="Date Input Error"}return t}function t(e){var t;switch(e){case 0:t="Sunday";break;case 1:t="Monday";break;case 2:t="Tuesday";break;case 3:t="Wednesday";break;case 4:t="Thursday";break;case 5:t="Friday";break;case 6:t="Saturday";break;default:t="Date Input Error"}return t}function n(e){var t,n=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,i=new Date(0/0),r=n.exec(e);return r&&(t=+r[2],i.setFullYear(r[1],t-1,r[3]),t!=i.getMonth()+1&&i.setTime(0/0)),i}function i(e,t){return e.date<t.date?-1:e.date>t.date?1:0}function r(){}$(function(){FastClick.attach(document.body)});var l=angular.module("msmApp",["ngRoute","ngSanitize","angulartics","angulartics.google.analytics"]);l.config(["$routeProvider","$logProvider",function(e,t){e.when("/",{templateUrl:"html/home.html"}).when("/about",{templateUrl:"html/about.html"}).when("/about_biblestudy",{templateUrl:"html/about_biblestudy.html"}).when("/about_thrive",{templateUrl:"html/about_thrive.html"}).when("/about_tmi",{templateUrl:"html/about_tmi.html"}).when("/updates_sundaybiblefellowship",{templateUrl:"html/updates_sundaybiblefellowship.html"}).when("/updates_thrive",{templateUrl:"html/updates_thrive.html"}).when("/updates_tmi",{templateUrl:"html/updates_tmi.html"}).when("/updates_upcoming",{templateUrl:"html/updates_upcoming.html"}).when("/podcasts",{templateUrl:"html/podcasts.html"}).when("/contact",{templateUrl:"html/contact.html"}).when("/blog",{templateUrl:"html/blog.html"}).when("/events",{templateUrl:"html/events.html"}).when("/news",{templateUrl:"html/news.html"}).when("/thankyou",{templateUrl:"html/thankyou.html"}).otherwise({redirectTo:"/"}),t.debugEnabled(!1)}]),l.service("selectedService",function(){var e,t={},n=function(){return e},i=function(n,i,r){i&&r&&(t[i]||(t[i]=""),t[i]=r),e=n,angular.forEach(t,function(){})};return{getSelected:n,setSelected:i}});var a={get:{img:function(e){var t=/<img([\w\W]+?)\/>/g,n=e.match(t);return e.replace(t,""),n},src:function(e){return e.match(/src="([\w\W]+?)"/g)}},replace:{tags:function(e){var t=/<div([^>]*)>|<\/div>|<img([^>]*)>|<\/img>|&#10;/g;return e.replace(t,"")},contentTags:function(e){e=e.replace(/&nbsp;/g," "),e=e.replace(/<br \/>|<br>/g,"<br/>");var t=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;e=e.replace(t,"");var n='<span class="optimus">The Multiply Initiative</span>';return e=e.replace(/The Multiply Initiative/g,n)}}};l.factory("BloggerPost",["$sanitize",function(i){var r=function(r){var l,o,s,c,u,d,p,m={getTitle:function(){return l},hasTitle:function(e){return e===l?!0:!1},getLabels:function(){return o},hasLabel:function(e){for(var t=0;o>t;t++)if(o[t]===e)return!0;return!1},getHtml:function(){var e=a.replace.tags(c);return e},extractImgs:function(){return a.get.img(c)},extractImgSrcUrls:function(){var e=this.extractImgs(),t=[];if(e)for(var n=0;n<e.length;n++){var i=a.get.src(e[n]);t.push(i[0].substring(5,i[0].length-1))}return t},appendPostInfo:function(){{var i=l.indexOf(":"),r=l.substr(0,i),a=l.substr(i+1,l.length),o=n(r),s=o.getDate(),c=t(o.getDay()),m=e(o.getMonth());o.getFullYear()}l=a,u=r,d=o,p=c+", "+m+" "+s},removeContentTags:function(){return c=a.replace.contentTags(c)},getSubtitle:function(){return u}};return r&&(l=r.title,o=r.labels,s=r.content,c=i(s)),m};return r}]),l.factory("BloggerPostList",["BloggerPost",function(e){var t=function(t){var n=[],i={getPosts:function(){return n}};if(t&&t.items)for(var r=0;r<t.items.length;r++)n.push(new e(t.items[r]));return i};return t}]),l.controller("NewHomeController",["$scope","httpService","BloggerPostList",function(e,t,n){function i(){e.bullets.push({number:e.bullets.length})}function r(t,n,r){t>e.slides.length?e.slides.push({url:n,src:r}):e.slides[t].src=r,i()}function l(){a=Swipe(document.getElementById("slider"),{startSlide:0,speed:400,auto:5e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(t){e.changeActive(t)},transitionEnd:function(){}})}var a;e.slides=[{url:""},{url:"#/about"},{url:"#/updates_upcoming"}],e.bullets=[],e.changeActive=function(t){e.selectedBullet=e.bullets[t],e.$$phase||e.$apply()},e.click=function(t){e.selectedBullet=e.bullets[t.number],a.slide(t.number)},t.resetSimpleGet(),t.getLabeledPost("$Home").then(function(t){for(var i=new n(t),a=i.getPosts()[0],o=a.extractImgSrcUrls(),s=0;s<o.length;s++)r(s,"",o[s]);e.selectedBullet=e.bullets[0],e.$watchCollection("slides",function(e,t){e!==t&&l()})})}]),l.directive("msmHomeHeader",["$log",function(e){var t=function(t){e.debug("msm-home-header scope",t)},n={priority:0,template:function(){var e='<div class="row">       											<div style="height: 120px;" class="small-12 columns show-for-medium-up">       												<a href="#"><img style="max-height: 145px" src="img/logo-msm.png"></a> 											    	</div> 											    	<div style="height: 70px;" class="small-12 columns show-for-small"> 											      	<a href="#"><img style="max-height: 100px" src="img/logo-msm.png"></a> 											    	</div> 											  	</div>';return e},transclude:!1,restrict:"A",scope:{imgUrl:"@"},compile:function(){return t}};return n}]),l.controller("AboutController",["$log","$scope","httpService","BloggerPostList",function(e,t,n,i){function r(e){var n=e.getTitle(),i=e.getHtml(),r=e.extractImgSrcUrls()[0];t.slides.push({post:e,title:n,content:i,src:r}),t.options.push({value:t.options.length,post:e,title:n,content:i,src:r})}function l(e){for(var n=0;n<t.slides.length;n++)t.slides[n].isActive=!1;t.slides[e].isActive=!0}var a={controllerName:"AboutController",title:"About Us",label:"$$$About Our Ministry"};t.slides=[],t.options=[],t.switchOption=function(){null!=t.currentOption&&(t.selectSlide(t.currentOption,t.currentOption.value),t.swipe.slide(t.currentOption.value))},t.callback=function(e){t.currentOption=t.options[e],t.$$phase||t.$apply()},t.selectSlide=function(e,n){t.subtitle=e.title,t.content=e.content,t.src=e.src,l(n)},n.resetSimpleGet(),n.getLabeledPost(a.label).then(function(e){var n=new i(e),l=n.getPosts();l[0]&&l[1]?(t.title=a.title,l[0].hasTitle("Our Youth Pastor")?(r(l[1]),r(l[0])):(r(l[0]),r(l[1])),t.selectSlide(t.slides[0],0),t.currentOption=t.options[0],t.$watchCollection("slides",function(e,n){e!==n&&t.createSwipe()})):t.title="Page Error; Please Refresh"},function(t){e.error(a.controllerName+": "+a.label,t)})}]),l.controller("AboutBibleStudyController",["$log","$scope","httpService","BloggerPostList",function(e,t,n,i){function r(e){var n=e.getTitle(),i=e.getSubtitle(),r=e.getHtml(),l=e.extractImgSrcUrls()[0];t.teachers.push({index:t.teachers.length,name:n,gradeLevel:i,content:r,img:l})}function l(){t.teachers.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})}t.teachers=[],t.about={},t.about.title="Bible Study",t.about.heading="About",t.loadTeacher=function(e){t.about.modal=e,$("#myModal").foundation("reveal","open")};var a={getPostsSundaySchool:function(r){var l="$$$Sunday Bible Fellowship";return n.getLabeledPost(l).then(function(n){e.debug(l+" data",n);var a=new i(n),o=a.getPosts();if(r)return e.error("SundaySchoolController:",l,"- STOP Chaining"),!0;var s=o[0];return s&&s.hasTitle("About: Bible Study")?(s.appendPostInfo(),t.about.title=s.getTitle(),t.about.content=s.getHtml(),t.about.heading=s.getSubtitle(),t.about.img=s.extractImgSrcUrls()[0],!1):(e.error("SundaySchoolController:",l,"- null data"),!0)},function(t){e.error("SundaySchoolController:",l,t)})},getPostsTeacherBios:function(t){var a="$$$Teacher Bios";return n.getLabeledPostRecursive(a).then(function(n){e.debug(a+" data",n);var o=new i(n),s=o.getPosts();if(t)return e.error("SundaySchoolController:",a,"- STOP Chaining"),!0;var c=s[0];if(c){for(var u=0;u<s.length;u++)s[u].removeContentTags(),s[u].appendPostInfo(),r(s[u]);return l(),!1}return e.error("SundaySchoolController:",a,"- null data"),!0},function(t){e.error("SundaySchoolController:",a,t)})}};n.resetSimpleGet(),a.getPostsSundaySchool().then(a.getPostsTeacherBios).then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("AboutThriveController",["$log","$scope","httpService","BloggerPostList",function(e,t,n,i){t.about={},t.about.title="Thrive",t.about.heading="About";var r={getPostsThrive:function(r){var l="$$$Thrive";return n.getLabeledPost(l).then(function(n){e.debug(l+" data",n);var a=new i(n),o=a.getPosts();if(r)return e.error("ThriveController:",l,"- STOP Chaining"),!0;var s=o[0];return s&&s.hasTitle("About: Thrive")?(s.appendPostInfo(),t.about.title=s.getTitle(),t.about.content=s.getHtml(),t.about.heading=s.getSubtitle(),t.about.img=s.extractImgSrcUrls()[0],!1):(e.error("ThriveController:",l,"- null data"),!0)},function(t){e.error("ThriveController:",l,t)})}};n.resetSimpleGet(),r.getPostsThrive().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("AboutTMIController",["$log","$scope","httpService","BloggerPostList",function(e,t,n,i){t.about={},t.about.title="The Multiply Initiative",t.about.heading="About";var r={getPostsTMI:function(r){var l="$$$The Multiply Initiative";return n.getLabeledPost(l).then(function(n){e.debug(l+" data",n);var a=new i(n),o=a.getPosts();if(r)return e.error("ThriveController:",l,"- STOP Chaining"),!0;var s=o[0];return s&&s.hasTitle("About: The Multiply Initiative")?(s.appendPostInfo(),t.about.title=s.getTitle(),t.about.content=s.getHtml(),t.about.heading=s.getSubtitle(),t.about.img=s.extractImgSrcUrls()[0],!1):(e.error("ThriveController:",l,"- null data"),!0)},function(t){e.error("ThriveController:",l,t)})}};n.resetSimpleGet(),r.getPostsTMI().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("TopBar",["$scope",function(e){function t(){for(var t=0;t<e.items.length;t++)if(e.items[t].nested.length>0)for(var n=0;n<e.items[t].nested.length;n++)e.items[t].nested[n].url===document.location.hash?(e.items[t].nested[n].selected=!0,r=e.items[t].nested[n],e.items[t].selected=!0,l=e.items[t]):e.items[t].nested[n].selected=!1;else e.items[t].url===document.location.hash?(e.items[t].selected=!0,r=e.items[t],l=e.items[t]):e.items[t].selected=!1}function n(){a.foundation("offcanvas","toggle","move-right")}function i(){window.orientation;o===!0&&c()}e.items=[{name:"Home",url:"#/",dropdown:!1,nested:[]},{name:"About Us",url:null,dropdown:!0,nested:[{name:"About Our Ministry",url:"#/about",nested:[]},{name:"Bible Study",url:"#/about_biblestudy",nested:[]},{name:"Thrive",url:"#/about_thrive",nested:[]},{name:"The Multiply Initiative",url:"#/about_tmi",nested:[]}]},{name:"Ministry Updates",url:"",dropdown:!0,nested:[{name:"Bible Study",url:"#/updates_sundaybiblefellowship",dropdown:!1,nested:[]},{name:"Thrive",url:"#/updates_thrive",dropdown:!1,nested:[]},{name:"The Multiply Initiative",url:"#/updates_tmi",dropdown:!1,nested:[]},{name:"Upcoming Events",url:"#/updates_upcoming",dropdown:!1,nested:[]}]},{name:"Podcasts",url:"#/podcasts",dropdown:!1,nested:[]},{name:"Contact",url:"#/contact",dropdown:!1,nested:[]}];var r,l,a=$(".off-canvas-wrap");e.select=function(e,t){e.dropdown||(r.selected=!1,e.selected=!0,r=e,t?(l.selected=!1,t.selected=!0,l=t):l.selected=!1),$(".top-bar").removeClass("expanded"),c()},e.toggleOpen=function(){n()};var o=!1,s=$("body");s.addClass("slide-from-side-closed"),e.toggleSlide=function(){c()};var c=function(){o===!1?(s.removeClass("slide-from-side-closed"),s.addClass("slide-from-side-open")):(s.removeClass("slide-from-side-open"),s.addClass("slide-from-side-closed")),o=!o};t(),window.addEventListener("orientationchange",i)}]),l.controller("UpdatesSundayBibleFellowship",["$log","$scope","$compile","httpService",function(e,t,n,r){function l(){t.title=a.title,t.subtitle=a.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=a.activeSlide,t.maxVisible=a.maxVisible,t.lastVisible=a.lastVisible}var a={controllerName:"UpdatesSundayBibleFellowship",title:"Bible Study",subtitle:"Updates",postHeading:"Updates",maxVisible:13,lastVisible:13,activeSlide:0,updateLabel:"$$$Sunday Bible Fellowship Updates"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=a.maxVisible,t.lastVisible=a.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(n){return r.getLabeledPostRecursive(a.updateLabel).then(function(r){if(n)return e.error(a.controllerName+" "+label,"- STOP Chaining"),!0;var l=r.items[0];return l?(angular.forEach(r.items,function(e){s.removeContentTags(e),o(e)}),r.items.sort(i),r.items.reverse(),angular.forEach(r.items,function(e,n){var i={heading:a.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(a.controllerName+" "+label,t)})}};l(),r.resetSimpleGet(),s.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesThrive",["$log","$scope","httpService",function(e,t,n){function r(){t.title=l.title,t.subtitle=l.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=l.activeSlide,t.maxVisible=l.maxVisible,t.lastVisible=l.lastVisible}var l={controllerName:"UpdatesThrive",title:"Thrive",subtitle:"Updates",postHeading:"Updates",maxVisible:13,lastVisible:13,activeSlide:0,updateLabel:"$$$Thrive Updates"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=l.maxVisible,t.lastVisible=l.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var a={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(r){return n.getLabeledPostRecursive(l.updateLabel).then(function(n){if(r)return e.error(l.controllerName+" "+label,"- STOP Chaining"),!0;var s=n.items[0];return s?(angular.forEach(n.items,function(e){a.removeContentTags(e),o(e)}),n.items.sort(i),n.items.reverse(),angular.forEach(n.items,function(e,n){var i={heading:l.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(l.controllerName+" "+label,t)})}};r(),n.resetSimpleGet(),a.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesTMI",["$log","$scope","$compile","httpService",function(e,t,n,r){function l(){t.title=a.title,t.subtitle=a.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=a.activeSlide,t.maxVisible=a.maxVisible,t.lastVisible=a.lastVisible}var a={controllerName:"UpdatesTMI",title:"The Multiply Initiative",subtitle:"Meditations",postHeading:"Meditations",maxVisible:15,lastVisible:15,activeSlide:0,updateLabel:"$$$Meditations"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=a.maxVisible,t.lastVisible=a.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(n){return r.getLabeledPostRecursive(a.updateLabel).then(function(r){if(n)return e.error(a.controllerName+" "+label,"- STOP Chaining"),!0;var l=r.items[0];return l?(angular.forEach(r.items,function(e){s.removeContentTags(e),o(e)}),r.items.sort(i),r.items.reverse(),angular.forEach(r.items,function(e,n){var i={heading:a.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(a.controllerName+" "+label,t)})}};l(),r.resetSimpleGet(),s.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesUpcoming",["$scope","httpService",function(r,l){var a={controllerName:"UpdatesUpcoming",title:"Upcoming Events",updateLabel:"$$$Upcoming Events"};r.callback=function(){};var o=function(e){e.imgLarge="img/Smushed/upcoming-default.jpg",e.visible=!0;for(var t=0;t<e.labels.length;t++){if(e.title.indexOf("Youth Mission Trip")>-1){e.imgSmall="img/Smushed/upcoming-youth-mission-trip.jpg",e.imgLarge="img/Smushed/upcoming-youth-mission-trip.jpg";break}if(e.title.indexOf("Crawdad")>-1){e.imgSmall="img/Smushed/upcoming-crawdad-small.jpg",e.imgLarge="img/Smushed/upcoming-crawdad.jpg",e.visible=!1;break}if(e.title.indexOf("Summer Lock-In")>-1){e.imgSmall="img/Smushed/upcoming-lock-in.jpg",e.imgLarge="img/Smushed/upcoming-lock-in.jpg";break}if("Evangelism"===e.labels[t]){e.imgSmall="img/Smushed/upcoming-evangelism.jpg",e.imgLarge="img/Smushed/upcoming-evangelism.jpg";break}if("Afterglow"===e.labels[t])break;if("Afterglow"===e.labels[t])break;if("Afterglow"===e.labels[t])break}};r.title=a.title,r.allUpcomingEvents;var s={},c={};l.resetRecursiveGet(),l.getLabeledPostRecursive(a.updateLabel).then(function(l){var a=new Date;angular.forEach(l.items,function(i){var r=i.title.indexOf(":"),l=i.title.substr(0,r),u=i.title.substr(r+1,i.title.length),d=n(l),p=n(l);p.setDate(p.getDate()+1);var m=d.getDate(),g=t(d.getDay()),h=e(d.getMonth()),f=d.getFullYear();i.title=u,i.date=d,i.dateText=g+", "+h+" "+m,o(i),a>p?(c[f]||(c[f]={year:f,events:new Array}),c[f].events.push(i)):f&&(s[f]||(s[f]={year:f,events:new Array}),s[f].events.push(i))}),angular.forEach(s,function(e){e.events.sort(i)}),r.allUpcomingEvents=s},function(e){$log.error(a.controllerName+": "+a.updateLabel,e)})}]);var o=function(i){{var r=i.title.indexOf(":"),l=i.title.substr(0,r),a=i.title.substr(r+1,i.title.length),o=n(l),s=o.getDate(),c=t(o.getDay()),u=e(o.getMonth());o.getFullYear()}i.title=a,i.subtitle=l,i.date=o,i.dateText=c+", "+u+" "+s};l.controller("PodcastsController",["$log","$scope","httpService",function(i,r,l){function a(e){s.src=e,s.load()}function o(){s.play()}angular.element("#audioPlayer").audioPlayer({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"});var s=document.getElementById("audioPlayer");r.callback=function(){},r.playThis=function(e){if(r.allPodcasts&&r.allPodcasts[e]){r.currentSermon=r.allPodcasts[e];var t=r.allPodcasts[e].dblink;a(t),r.prevSlide(),o()}},r.searchTypes=[{type:"By Title"},{type:"By Speaker"},{type:"By Series"}],r.searchType=r.searchTypes[0],r.show={title:!0,speaker:!1,series:!1},r.switchType=function(){switch(r.show.title=!1,r.show.speaker=!1,r.show.series=!1,r.searchType.type){case"By Title":r.show.title=!0;break;case"By Speaker":r.show.speaker=!0;break;case"By Series":r.show.series=!0}};var c="$Podcasts";r.title=c.substr(1,c.length),r.allPodcasts={},l.resetSimpleGet(),l.getLabeledPost(c).then(function(i){if(i.items[0]){var l=i.items[0].content,o=l.toString();if(o){var s=JSON.parse(o);s&&(angular.forEach(s,function(i){var r=n(i.date);i.dayNumber=r.getDate(),i.day=t(r.getDay()),i.month=e(r.getMonth()),isNaN(i.dayNumber)?(i.month="No Date",i.dayNumber="",i.day=""):i.date=i.month+" "+i.dayNumber+", "+r.getFullYear()}),r.allPodcasts=s,r.allPodcasts&&(r.currentSermon=r.allPodcasts[0],r.currentSermon&&(a(r.currentSermon.dblink),r.createSwipe())))}}},function(e){i.error("PodcastsController: $Podcasts",e)})}]),l.controller("ContactController",["$log","$scope","httpService",function(e,t,n){n.resetSimpleGet(),n.getLabeledPost("$Contact").then(function(e){if(e.items[0]){var n=e.items[0];t.title=n.title,t.content=n.content}else t.title="Page Error";r()},function(t){e.error("ContactController: $Contact",t)})}]),l.directive("topBarListItems",["$log",function(e){var t=function(t){e.debug("tob-bar-list-item scope",t),t.select=function(e,n){t.selectFn({item:e,topItem:n})}},n={priority:0,template:function(){var e='<ul class="left menu-options"> 						                <li ng-repeat="item in items" 						                	ng-class="{ 					                			active: item.selected, 					                			\'has-dropdown\': item.dropdown 						                	}"> 						                  <a ng-if="!item.dropdown" 						                  	ng-click="select(item)" 						                  	href="{{item.url}}"> 						                  	{{item.name}} 					                  	</a> 						                  <a ng-if="item.dropdown">{{item.name}}</a> 						                  <ul ng-if="item.dropdown" class="dropdown"> 						                    <li ng-repeat="subItem in item.nested" 						                    	ng-class="{ 							                			active: subItem.selected 								                	}"> 						                    	<a ng-click="select(subItem, item)" 						                    		href="{{subItem.url}}"> 						                    		{{subItem.name}} 					                    		</a> 					                    	</li> 						                  </ul> 						                </li> 					                </ul>';return e},transclude:!1,restrict:"A",scope:{items:"=",selectFn:"&"},compile:function(){return t}};return n}]),l.directive("offCanvasListItems",["$log",function(e){var t=function(t){e.debug("off-canvas-list-item scope",t),t.select=function(e,n){t.selectFn({item:e,topItem:n})}},n={priority:0,template:function(){var e='<ul class="off-canvas-list"> 									          <li><label>Multiply Student Ministry</label></li> 									          <li ng-repeat="item in items" ng-class="{ \'has-submenu\': item.dropdown }"> 									            <a ng-if="!item.dropdown" ng-click="select(item)" href="{{item.url}}">{{ item.name }}</a> 									            <a ng-if="item.dropdown">{{ item.name }}</a> 									            <ul ng-if="item.dropdown" class="left-submenu"> 									              <li class="back"><a>Back</a></li> 									              <li><label>{{ item.name }}</label></li> 									              <li ng-repeat="subItem in item.nested"> 									              	<a ng-click="select(subItem, item)" href="{{ subItem.url }}"> 									              		{{ subItem.name }} 								              		</a> 								              	</li> 									            </ul> 									          </li> 									        </ul>';return e},transclude:!1,restrict:"A",scope:{items:"=",selectFn:"&"},compile:function(){return t}};return n}]),l.directive("infiniteSwipe",["$log","$compile",function(e){var t=function(t,n){e.debug("infinite-swipe scope",t);var i=500,r=!0,l=!0,a=!0,o={carousel:null,minLength:t.minLength,init:function(){n.height(t.fixedHeight?t.fixedHeight:i),o.carousel=new SwipeView(t.swipeElement[0],{numberOfPages:t.slides.length,hastyPageFlip:!0,loop:!1}),t.swipeElement[0].style.overflowX="hidden",t.swipeElement[0].style.overflowY="scroll",o.loadInitialData(),o.carousel.onFlip(o.onFlipHandler)},loadInitialData:function(){for(var e=0;3>e;e++){var n;n=0===e?t.slides.length:e-1;var i=document.createElement("div");i.className="infiniteSwipe",o.setSlideContent(i,t.slides[n]),0===n&&(t.heading=t.slides[n].heading),o.carousel.masterPages[e].appendChild(i)}},onFlipHandler:function(){for(var e,n,i=0;3>i;i++)n=o.carousel.masterPages[i].dataset.upcomingPageIndex,n!=o.carousel.masterPages[i].dataset.pageIndex&&(e=o.carousel.masterPages[i].querySelector("div"),o.setSlideContent(e,t.slides[n]));r&&!t.$$phase?t.$apply(function(){t.heading=t.slides[o.carousel.pageIndex].heading,t.activeIndex=o.carousel.pageIndex,l=!1}):(t.heading=t.slides[o.carousel.pageIndex].heading,t.activeIndex=o.carousel.pageIndex,r=!0)},setSlideContent:function(e,t){if(t){var n="<h2>"+t.title+"</h2>",i="<h3>"+t.date+"</h3>";e.innerHTML=n+i+t.content}}},s=!1;t.$watchCollection("slides",function(e){e&&e.length>=o.minLength&&(o.init(),s&&($("#swipeview-masterpage-1").append(t.compiledElem),s=!1))}),t.$watch("activeIndex",function(e){a&&(l&&!isNaN(e)&&t.slides.length>=o.minLength&&(r=!1,c(e)),l=!0)}),t.$watch("compiledElem",function(e){e&&(s=!0)});var c=function(e){2>e?(a=!1,o.carousel.goToPage(e),a=!0):(a=!1,o.carousel.goToPage(e-2),o.carousel.next(),o.carousel.next(),a=!0)};t.nextSlide=function(){o.carousel.next()},t.prevSlide=function(){o.carousel.prev()},$(document).keyup(function(e){37===e.which&&t.prevSlide(),39===e.which&&t.nextSlide()})},n={priority:0,template:function(){var e='<div style="height: 100%;"> 	    											<div class="clearfix" style="height: 112px;"> 												      <a class="no-text-select left" ng-click="prevSlide()"><i class="fi-arrow-left" style="color: #ff2701; font-size: 3em;"></i></a> 												      <a class="no-text-select right" ng-click="nextSlide()"><i class="fi-arrow-right" style="color: #ff2701; font-size: 3em;"></i></a> 												      <h1 class="text-center" style="margin: 0;">{{ heading }}</h1> 												      <h2 class="hide-for-touch text-center" style="margin: 0;"><small>Use arrow keys to navigate</small></h2> 												      <h2 class="show-for-touch text-center" style="margin: 0;"><small>Swipe or use arrow keys to navigate</small></h2> 												    </div> 	      										<div style="height: calc(100% - 112px); 	      											padding: 1.25rem; 											      	border-style: solid; 											      	border-width: 1px; 											      	border-color: #d9d9d9; 											      	background-color: #f2f2f2;"> 											      	<div ng-scope-element="swipeElement" 											      		style="height: 100%; 											      		-webkit-overflow-scrolling: touch; 											      		overflow-x: hidden !important; 											      		overflow-y: scroll !important;"> 										      		</div> 									      		</div>       										</div>';return e},transclude:!1,restrict:"A",scope:{slides:"=",minLength:"=",activeIndex:"=",fixedHeight:"=",compiledElem:"="},compile:function(){return t}};return n}]),l.directive("swipejs",function(){return function(e,t){e.createSwipe=function(){e.swipe=Swipe(t[0],{startSlide:0,speed:400,auto:0,continuous:!1,disableScroll:!1,stopPropagation:!1,callback:function(){},transitionEnd:function(t){e.callback(t)}})},e.prevSlide=function(){e.swipe.prev()},e.nextSlide=function(){e.swipe.next()},$(document).keyup(function(t){37===t.which&&e.prevSlide(),39===t.which&&e.nextSlide()})}}),l.directive("swipeEvent",function(){return{restrict:"A",link:function(e,t){var n=!0;e.createSwipe=function(){e.swipe=Swipe(t[0],{startSlide:0,speed:400,auto:0,continuous:!1,disableScroll:!1,stopPropagation:!0,callback:function(){},transitionEnd:function(){}})},e.createSwipe(),e.toggle=function(){n?e.swipe.next():e.swipe.prev(),n=!n},e.prevSlide=function(){e.swipe.prev()},e.nextSlide=function(){e.swipe.next()}}}}),l.directive("backImg",function(){return{restrict:"A",link:function(e,t,n){var i=n.backImg;e.setImg=function(){t.css({"background-image":"url("+i+")"})},e.setImg()}}}),l.directive("newsItem",function(){return{restrict:"E",template:'<div class="expand-on-small panel hero shadowed-image"><div class="small-12 large-12 columns"><h3>{{news.title}}</h3><h4>{{news.dateText}}</h4><br/></div><div class="row transparent"><div class="small-12 large-12 columns"><div ng-bind-html="news.content" class="panel shadowed-image"></div></div></div></div>',replace:!0,link:function(){}}}),l.directive("weeklyEvent",["$http","$compile","$location",function(e,t,n){return{restrict:"E",template:"<div></div>",controller:"weeklyController",link:function(i,r){var l=n.$$hash,a="html/"+l+".html";"biblestudy"===l?(i.isBibleStudy=!0,i.isSundaySchool=!1):"sundayschool"===l&&(i.isBibleStudy=!1,i.isSundaySchool=!0),e.get(a).then(function(e){var n=e.data;r.html(n),t(r.contents())(i)}),i.$watch("url",function(n){n&&e.get(n).then(function(e){var n=e.data;r.html(n),t(r.contents())(i)})})}}}]),l.directive("podcast",function(){return{restrict:"E",template:'<div class="podcasts small-12 large-12 columns panel shadowed-image"><div class="small-12 large-2 columns"><a href="#" class="button"><i class="foundiconacc-speaker"></i> Listen </a></div><div class="small-12 large-2 columns"><p>August 13, 2013</p></div><div class="small-12 large-6 columns"><h3>Nathan Ramirez</h3><h2>Final Camp Exhortation</h2></div><div class="small-12 large-2 columns"><a href="Nathan Camp Final Exortation.mp3"><i class="foundicongen-inbox"></i> Download </a></div></div>',link:function(){}}}),l.directive("chosenPodcast",function(){return{restrict:"E",template:'<div style="height: 300px; background: #f5f4f0 url(\'img/Smushed/podcasts-art.jpg\') center top repeat-y; background-size: cover"><div class="small-12 medium-6 columns" style="height: 300px; overflow-y: scroll; color: #fff;"><h3 style="color: #fff;">{{currentSermon.title}}</h3><h4 style="color: #fff;">{{currentSermon.speaker}}</h4><h4 style="color: #fff;">{{currentSermon.series}}</h4><p>{{currentSermon.date}}</p><p><strong>Passage/Topic: {{currentSermon.passage}}</strong></p><p class="show-for-small">{{currentSermon.description}}</p></div><div class="hide-for-small small-12 medium-6 columns" style="height: 300px; overflow-y: scroll; color: #fff;"><p>{{currentSermon.description}}</p></div></div>',link:function(){}}}),l.directive("ngScopeElement",function(){var e={restrict:"A",compile:function(){return{pre:function(e,t,n){e[n.ngScopeElement]=t}}}};return e}),l.controller("FeedCtrl",["$scope","httpService",function(e,t){e.loadButonText="Load",e.posts,t.getBlogPosts().success(function(t){console.log("posts",t),e.posts=t.items}).error(function(){}),t.getBlog().success(function(t){console.log("blog",t.items),e.blog=t.items}).error(function(){})}]),l.service("httpService",["$log","$http","$q",function(e,t,n){var i=this,r="AIzaSyBwh5B3d-nVf8Ut6mf690Id5miFFQ01s0M",l="1357003820482584675";i.getBlog=function(){var e="https://www.googleapis.com/blogger/v3/blogs/"+l+"?key="+r+"&callback=JSON_CALLBACK";return t.jsonp(e)},i.getBlogPosts=function(){var e="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxPosts=9999&key="+r+"&callback=JSON_CALLBACK";return t.jsonp(e)};var a={deferred:null,mainLabel:"",container:{items:new Array},getPost:function(){var n="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxResults=20&labels="+a.mainLabel+"&fields=nextPageToken,items(title,published,labels,content)&key="+r+"&callback=JSON_CALLBACK";t.jsonp(n).success(function(e){a.container.items.push.apply(a.container.items,e.items),a.deferred.resolve(a.container)}).error(function(t){e.error("httpService: simpleGet",t)})},resetGet:function(){a.deferred=n.defer(),a.mainLabel="",a.container={items:new Array}}};i.getLabeledPost=function(e){return a.resetGet(),a.deferred=n.defer(),a.mainLabel=e,a.getPost(),a.deferred.promise},i.resetSimpleGet=function(){a.resetGet()};var o={deferred:null,mainLabel:"",container:{items:new Array},getPost:function(e,n){var i="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxResults=20";
n&&(i+="&pageToken="+n),i+="&labels="+o.mainLabel+"&fields=nextPageToken,items(title,published,labels,content)&key="+r+"&callback=JSON_CALLBACK",t.jsonp(i).success(function(e){o.container.items.push.apply(o.container.items,e.items),e.nextPageToken?o.getPost(o.mainLabel,e.nextPageToken):o.deferred.resolve(o.container)}).error(function(){})},resetGet:function(){o.deferred=n.defer(),o.mainLabel="",o.container={items:new Array}}};i.getLabeledPostRecursive=function(e){return o.resetGet(),o.deferred=n.defer(),o.mainLabel=e,o.getPost(),o.deferred.promise},i.resetRecursiveGet=function(){o.resetGet()}}]),l.controller("SlidesController",function(){console.log("SlidesController"),$(function(){console.log("run after doc load")})}),l.controller("JoyrideController",["$scope",function(e){e.tour=function(){console.log("joyride controller working!")}}]),l.controller("InitializeController",[function(){$(document).foundation()}]),l.controller("HomeController",["$scope","httpService",function(l,a){var o="$$Upcoming Ministry Events",s={};l.nextEvent,a.getLabeledPostRecursive(o).then(function(i){var r=new Date;angular.forEach(i.items,function(i){var l=i.title.indexOf(":"),a=i.title.substr(0,l),o=i.title.substr(l+1,i.title.length),c=n(a),u=c.getDate(),d=t(c.getDay()),p=e(c.getMonth()),m=c.getFullYear();i.title=o,i.date=c,i.dateText=d+", "+p+" "+u,r>c||m&&(s[c]||(s[c]=i))});var a;angular.forEach(s,function(e){a?a>e.date&&(a=e.date):a=e.date}),l.nextEvent=s[a]}).then(function(){a.resetRecursiveGet();var o="$News/Updates";l.currentNews;var s=(new Array,new Array),c=(new Array,{0:{title:"Current News/Updates",data:{}}});a.resetRecursiveGet(),a.getLabeledPostRecursive(o).then(function(a){var o=new Date;angular.forEach(a.items,function(i){{var r=i.title.indexOf(":"),l=i.title.substr(0,r),a=i.title.substr(r+1,i.title.length),c=n(l),u=c.getDate(),d=t(c.getDay()),p=e(c.getMonth());c.getFullYear()}if(i.title=a,i.date=c,i.dateText="For "+d+", "+p+" "+u,i.labels.indexOf("Sunday School Update")>=0||i.labels.indexOf("Bible Study Update")>=0){var m=new Date(i.date.getTime()-6048e5);i.date=m}var g=new Date(i.date.getTime()+6912e5),h=new Date(i.date.getTime()+864e5);i.date>o||o>g||(i.labels.indexOf("Sunday School Update")>=0||i.labels.indexOf("Bible Study Update")>=0?o>h&&s.push(i):s.push(i))}),c[0].data=s,angular.forEach(c,function(e){e.data.sort(i),e.data.reverse()}),l.currentNews=c[0].data,angular.element(document).foundation("orbit",{});var u=angular.element(".orbit-container img").first().height()+20;angular.element(".orbit-slides-container").css({"min-height":u}),r()})})}]),l.controller("BibleStudyController",["$log","$scope","httpService",function(e,t,n){t.options=[{value:0,title:"temp",content:"temp"},{value:1,title:"temp",content:"temp"}],t.switchOption=function(){null!=t.currentOption&&(0===t.currentOption.value?t.getBibleStudyTemplate():1===t.currentOption.value&&t.getSundaySchoolTemplate(),t.swipe.slide(t.currentOption.value))},t.callback=function(e){t.currentOption=t.options[e],t.$$phase||t.$apply()};var i,r,l={bibleStudy:{},sundaySchool:{}};n.resetSimpleGet(),n.getLabeledPost("$$Weekly Ministries").then(function(e){if(e.items[0]&&e.items[1]){var n=e.items[0].labels[0];if("$$"!==n.substr(0,2))return t.title="Page Error","";t.title="Weekly Bible Study","Weekly Bible Study"===e.items[0].title?(i=e.items[0],r=e.items[1]):(i=e.items[1],r=e.items[0]),l.sundaySchool.title=r.title,l.sundaySchool.content=r.content,l.bibleStudy.title=i.title,l.bibleStudy.content=i.content,t.getBibleStudyTemplate(),t.options[0].title=r.title,t.options[0].content=r.content,t.options[0].img="img/Smushed/weekly-2-banner.jpg",t.options[0].mapLink="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",t.options[0].mapImg="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",t.options[1].title=i.title,t.options[1].content=i.content,t.options[1].img="img/Smushed/weekly-1-banner.jpg",t.options[1].mapLink="https://maps.google.com/maps?q=24724+aldine+westfield,+spring+TX,+77373&hl=en&ll=30.065213,-95.401046&spn=0.010047,0.01457&sll=31.168934,-100.076842&sspn=10.762073,12.436523&hnear=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&t=m&z=16",t.options[1].mapImg="http://maps.googleapis.com/maps/api/staticmap?center=1411+kennoway+park,+Spring+TX,+77379&zoom=14&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C1411+kennoway+park,+Spring+TX,+77379&sensor=false",t.currentOption=t.options[0]}else t.title="Page Error"},function(t){e.error("WeeklyController: $$Weekly Ministries",t)}),t.getBibleStudyTemplate=function(){t.image="img/Smushed/weekly-1-banner.jpg",t.subtitle=l.bibleStudy.title,t.content=l.bibleStudy.content,t.mapLink="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",t.mapImg="http://maps.googleapis.com/maps/api/staticmap?center=1411+kennoway+park,+Spring+TX,+77379&zoom=14&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C1411+kennoway+park,+Spring+TX,+77379&sensor=false",t.isBibleStudy=!0,t.isSundaySchool=!1},t.getSundaySchoolTemplate=function(){t.image="img/Smushed/weekly-2-banner.jpg",t.subtitle=l.sundaySchool.title,t.content=l.sundaySchool.content,t.mapLink="https://maps.google.com/maps?q=24724+aldine+westfield,+spring+TX,+77373&hl=en&ll=30.065213,-95.401046&spn=0.010047,0.01457&sll=31.168934,-100.076842&sspn=10.762073,12.436523&hnear=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&t=m&z=16",t.mapImg="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",t.isBibleStudy=!1,t.isSundaySchool=!0}}])}();