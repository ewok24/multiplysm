!function(){"use strict";function e(e){var t;switch(e){case 0:t="January";break;case 1:t="February";break;case 2:t="March";break;case 3:t="April";break;case 4:t="May";break;case 5:t="June";break;case 6:t="July";break;case 7:t="August";break;case 8:t="September";break;case 9:t="October";break;case 10:t="November";break;case 11:t="December";break;default:t="Date Input Error"}return t}function t(e){var t;switch(e){case 0:t="Sunday";break;case 1:t="Monday";break;case 2:t="Tuesday";break;case 3:t="Wednesday";break;case 4:t="Thursday";break;case 5:t="Friday";break;case 6:t="Saturday";break;default:t="Date Input Error"}return t}function n(e){var t,n=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,i=new Date(0/0),a=n.exec(e);return a&&(t=+a[2],i.setFullYear(a[1],t-1,a[3]),t!=i.getMonth()+1&&i.setTime(0/0)),i}function i(e,t){return e.date<t.date?-1:e.date>t.date?1:0}function a(){}$(function(){FastClick.attach(document.body)});var l=angular.module("msmApp",["ngRoute","ngSanitize","angulartics","angulartics.google.analytics"]);l.config(["$routeProvider","$logProvider",function(e,t){e.when("/",{templateUrl:"html/home.html"}).when("/about",{templateUrl:"html/about.html"}).when("/about_biblestudy",{templateUrl:"html/about_biblestudy.html"}).when("/about_thrive",{templateUrl:"html/about_thrive.html"}).when("/about_tmi",{templateUrl:"html/about_tmi.html"}).when("/updates_sundaybiblefellowship",{templateUrl:"html/updates_sundaybiblefellowship.html"}).when("/updates_thrive",{templateUrl:"html/updates_thrive.html"}).when("/updates_tmi",{templateUrl:"html/updates_tmi.html"}).when("/updates_upcoming",{templateUrl:"html/updates_upcoming.html"}).when("/podcasts",{templateUrl:"html/podcasts.html"}).when("/contact",{templateUrl:"html/contact.html"}).when("/blog",{templateUrl:"html/blog.html"}).when("/events",{templateUrl:"html/events.html"}).when("/news",{templateUrl:"html/news.html"}).when("/thankyou",{templateUrl:"html/thankyou.html"}).otherwise({redirectTo:"/"}),t.debugEnabled(!0)}]),l.service("selectedService",function(){var e,t={},n=function(){return e},i=function(n,i,a){i&&a&&(t[i]||(t[i]=""),t[i]=a),e=n,angular.forEach(t,function(){})};return{getSelected:n,setSelected:i}}),l.controller("TopBar",["$scope",function(e){function t(){for(var t=0;t<e.items.length;t++)if(e.items[t].nested.length>0)for(var n=0;n<e.items[t].nested.length;n++)e.items[t].nested[n].url===document.location.hash?(e.items[t].nested[n].selected=!0,a=e.items[t].nested[n],e.items[t].selected=!0,l=e.items[t]):e.items[t].nested[n].selected=!1;else e.items[t].url===document.location.hash?(e.items[t].selected=!0,a=e.items[t],l=e.items[t]):e.items[t].selected=!1}function n(){o.foundation("offcanvas","toggle","move-right")}function i(){window.orientation;r===!0&&c()}e.items=[{name:"Home",url:"#/",dropdown:!1,nested:[]},{name:"About Us",url:null,dropdown:!0,nested:[{name:"About Our Ministry",url:"#/about",nested:[]},{name:"Sunday Bible Fellowship",url:"#/about_biblestudy",nested:[]},{name:"Thrive",url:"#/about_thrive",nested:[]},{name:"The Multiply Initiative",url:"#/about_tmi",nested:[]}]},{name:"Ministry Updates",url:"",dropdown:!0,nested:[{name:"Sunday Bible Fellowship",url:"#/updates_sundaybiblefellowship",dropdown:!1,nested:[]},{name:"Thrive",url:"#/updates_thrive",dropdown:!1,nested:[]},{name:"The Multiply Initiative",url:"#/updates_tmi",dropdown:!1,nested:[]},{name:"Upcoming Events",url:"#/updates_upcoming",dropdown:!1,nested:[]}]},{name:"Podcasts",url:"#/podcasts",dropdown:!1,nested:[]},{name:"Contact",url:"#/contact",dropdown:!1,nested:[]}];var a,l,o=$(".off-canvas-wrap");e.select=function(e,t){e.dropdown||(a.selected=!1,e.selected=!0,a=e,t?(l.selected=!1,t.selected=!0,l=t):l.selected=!1),$(".top-bar").removeClass("expanded"),c()},e.toggleOpen=function(){n()};var r=!1,s=$("body");s.addClass("slide-from-side-closed"),e.toggleSlide=function(){c()};var c=function(){r===!1?(s.removeClass("slide-from-side-closed"),s.addClass("slide-from-side-open")):(s.removeClass("slide-from-side-open"),s.addClass("slide-from-side-closed")),r=!r};t(),window.addEventListener("orientationchange",i)}]),l.controller("NewHomeController",["$scope",function(e){e.slides=[{url:"",src:"img/slide0-MainSlide.png"},{url:"#/about",src:"img/slide1-Welcome.png"},{url:"",src:"img/slide1-Welcome.png"}],e.bullets=[{number:0},{number:1},{number:2}],e.selectedBullet=e.bullets[0];var t=Swipe(document.getElementById("slider"),{startSlide:0,speed:400,auto:5e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(t){e.changeActive(t)},transitionEnd:function(){}});e.changeActive=function(t){e.selectedBullet=e.bullets[t],e.$$phase||e.$apply()},e.click=function(n){e.selectedBullet=e.bullets[n.number],t.slide(n.number)},e.prevSlide=function(){t.prev()},e.nextSlide=function(){t.next()}}]),l.controller("AboutController",["$log","$scope","httpService",function(e,t,n){var i={controllerName:"AboutController",title:"About Us",aboutLabel:"$$$About Our Ministry"};t.options=[{value:0,title:"temp",content:"temp"},{value:1,title:"temp",content:"temp"}],t.switchOption=function(){null!=t.currentOption&&(0===t.currentOption.value?t.getMissionStatement():1===t.currentOption.value&&t.getOurYouthPastor(),t.swipe.slide(t.currentOption.value))},t.callback=function(e){t.currentOption=t.options[e],t.$$phase||t.$apply()};var a,l,o={missionStatement:{},ourYouthPastor:{}};n.resetSimpleGet(),n.getLabeledPost(i.aboutLabel).then(function(e){if(e.items[0]&&e.items[1]){{e.items[0].labels[0]}t.title=i.title,"Our Youth Pastor"===e.items[0].title?(l=e.items[0],a=e.items[1]):(l=e.items[1],a=e.items[0]),o.missionStatement.title=a.title,o.missionStatement.content=a.content,o.ourYouthPastor.title=l.title,o.ourYouthPastor.content=l.content,t.getMissionStatement(),t.options[0].title=a.title,t.options[0].content=a.content,t.options[0].img="img/Smushed/about-us-1-banner.jpg",t.options[1].title=l.title,t.options[1].content=l.content,t.options[1].img="img/Smushed/about-us-2-banner.jpg",t.currentOption=t.options[0],t.createSwipe()}else t.title="Page Error"},function(t){e.error(i.controllerName+": "+i.aboutLabel,t)}),t.getMissionStatement=function(){t.subtitle=o.missionStatement.title,t.content=o.missionStatement.content,t.img="img/Smushed/about-us-1-banner.jpg",t.isMissionStatement=!0,t.isOurYouthPastor=!1},t.getOurYouthPastor=function(){t.subtitle=o.ourYouthPastor.title,t.content=o.ourYouthPastor.content,t.img="img/Smushed/about-us-2-banner.jpg",t.isMissionStatement=!1,t.isOurYouthPastor=!0}}]),l.controller("AboutBibleStudyController",["$log","$scope","httpService",function(e,t,n){t.teachers=[{index:0,name:"Clay & Nikky Howard",gradeLevel:"7-8",img:"img/Smushed/bio-howard.jpg"},{index:1,name:"Xavier Hurd",gradeLevel:"9-10 (Guys)",img:"img/Smushed/bio-hurd.jpg"},{index:2,name:"John Munns",gradeLevel:"9-10 (Guys)",img:"img/Smushed/bio-munns.jpg"},{index:3,name:"Anna Hull",gradeLevel:"9-10 (Girls)",img:"img/Smushed/bio-hull.jpg"},{index:4,name:"Shelbie Patino",gradeLevel:"9-10 (Girls)",img:"img/Smushed/bio-patino.jpg"},{index:5,name:"Jeremy & Shari Loftin",gradeLevel:"11-12",img:"img/Smushed/bio-loftin.jpg"}],t.about={},t.about.title="Sunday Bible Fellowship",t.about.heading="About";var i="img/Smushed/about-bibleFellowship.jpg";t.about.img=i;var a="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",l="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",r='<a href="'+a+'" target="_blank"> 								<img class="bordered-image" 									src="'+l+'"> 							</img> 						</a>';t.about.map=r,t.loadTeacher=function(e){t.about.modal=e,$("#myModal").foundation("reveal","open")};var s={appendPostInfo:function(e){var t=e.title.indexOf(":"),n=e.title.substr(0,t),i=e.title.substr(t+1,e.title.length);e.name=i,e.gradeLevel=n,i.indexOf("Howard")>0?(e.index=0,e.img="img/Smushed/bio-howard.jpg"):i.indexOf("Hurd")>0?(e.index=1,e.img="img/Smushed/bio-hurd.jpg"):i.indexOf("Munns")>0?(e.index=2,e.img="img/Smushed/bio-munns.jpg"):i.indexOf("Hull")>0?(e.index=3,e.img="img/Smushed/bio-hull.jpg"):i.indexOf("Patino")>0?(e.index=4,e.img="img/Smushed/bio-patino.jpg"):i.indexOf("Loftin")>0&&(e.index=5,e.img="img/Smushed/bio-loftin.jpg")},removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsSundaySchool:function(i){var a="$$$Sunday Bible Fellowship";return n.getLabeledPost(a).then(function(n){if(console.log("data",n),i)return e.error("SundaySchoolController:",a,"- STOP Chaining"),!0;var l=n.items[0];return n.items&&n.items[0]&&"About: Sunday Bible Fellowship"===n.items[0].title&&(l=n.items[0]),l?(o(l),t.about.content=l.content,t.about.title=l.title,t.about.heading=l.subtitle,!1):(e.error("SundaySchoolController:",a,"- null data"),!0)},function(t){e.error("SundaySchoolController:",a,t)})},getPostsTeacherBios:function(i){var a="$$$Teacher Bios";return n.getLabeledPostRecursive(a).then(function(n){if(i)return e.error("SundaySchoolController:",a,"- STOP Chaining"),!0;var l=n.items[0];if(l){angular.forEach(n.items,function(e){s.removeContentTags(e),s.appendPostInfo(e)}),n.items.sort(function(e,t){return e.index-t.index}),t.teachers=n.items;return!1}return e.error("SundaySchoolController:",a,"- null data"),!0},function(t){e.error("SundaySchoolController:",a,t)})}};n.resetSimpleGet(),s.getPostsSundaySchool().then(s.getPostsTeacherBios).then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("AboutThriveController",["$log","$scope","httpService",function(e,t,n){t.about={},t.about.title="Thrive",t.about.heading="About";var i="img/Smushed/about-thrive.jpg";t.about.img=i;var a="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",l="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",r='<a href="'+a+'" target="_blank"> 								<img class="bordered-image" 									src="'+l+'"> 							</img> 						</a>';t.about.map=r;var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsThrive:function(i){var a="$$$Thrive";return n.getLabeledPost(a).then(function(n){if(i)return e.error("ThriveController:",a,"- STOP Chaining"),!0;var l=n.items[0];return n.items&&n.items[0]&&"About: Thrive"===n.items[0].title&&(l=n.items[0]),l?(o(l),t.about.content=l.content,t.about.title=l.title,t.about.heading=l.subtitle,!1):(e.error("ThriveController:",a,"- null data"),!0)},function(t){e.error("ThriveController:",a,t)})}};n.resetSimpleGet(),s.getPostsThrive().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("AboutTMIController",["$log","$scope","httpService",function(e,t,n){t.about={},t.about.title="The Multiply Initiative",t.about.heading="About";var i="img/Smushed/about-multiply.jpg";t.about.img=i;var a="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",l="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",r='<a href="'+a+'" target="_blank"> 								<img class="bordered-image" 									src="'+l+'"> 							</img> 						</a>';t.about.map=r;var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsTMI:function(i){var a="$$$The Multiply Initiative";return n.getLabeledPost(a).then(function(n){if(i)return e.error("ThriveController:",a,"- STOP Chaining"),!0;var l=n.items[0];return n.items&&n.items[0]&&"About: The Multiply Initiative"===n.items[0].title&&(l=n.items[0]),l?(o(l),t.about.content=l.content,t.about.title=l.title,t.about.heading=l.subtitle,!1):(e.error("ThriveController:",a,"- null data"),!0)},function(t){e.error("ThriveController:",a,t)})}};n.resetSimpleGet(),s.getPostsTMI().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesSundayBibleFellowship",["$log","$scope","$compile","httpService",function(e,t,n,a){function l(){t.title=r.title,t.subtitle=r.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=r.activeSlide,t.maxVisible=r.maxVisible,t.lastVisible=r.lastVisible}var r={controllerName:"UpdatesSundayBibleFellowship",title:"Sunday Bible Fellowship",subtitle:"Updates",postHeading:"Updates",maxVisible:13,lastVisible:13,activeSlide:0,updateLabel:"$$$Sunday Bible Fellowship Updates"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=r.maxVisible,t.lastVisible=r.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(n){return a.getLabeledPostRecursive(r.updateLabel).then(function(a){if(n)return e.error(r.controllerName+" "+label,"- STOP Chaining"),!0;var l=a.items[0];return l?(angular.forEach(a.items,function(e){s.removeContentTags(e),o(e)}),a.items.sort(i),a.items.reverse(),angular.forEach(a.items,function(e,n){var i={heading:r.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(r.controllerName+" "+label,t)})}};l(),a.resetSimpleGet(),s.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesThrive",["$log","$scope","httpService",function(e,t,n){function a(){t.title=l.title,t.subtitle=l.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=l.activeSlide,t.maxVisible=l.maxVisible,t.lastVisible=l.lastVisible}var l={controllerName:"UpdatesThrive",title:"Thrive",subtitle:"Updates",postHeading:"Updates",maxVisible:13,lastVisible:13,activeSlide:0,updateLabel:"$$$Thrive Updates"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=l.maxVisible,t.lastVisible=l.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var r={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(a){return n.getLabeledPostRecursive(l.updateLabel).then(function(n){if(a)return e.error(l.controllerName+" "+label,"- STOP Chaining"),!0;var s=n.items[0];return s?(angular.forEach(n.items,function(e){r.removeContentTags(e),o(e)}),n.items.sort(i),n.items.reverse(),angular.forEach(n.items,function(e,n){var i={heading:l.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(l.controllerName+" "+label,t)})}};a(),n.resetSimpleGet(),r.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesTMI",["$log","$scope","$compile","httpService",function(e,t,n,a){function l(){t.title=r.title,t.subtitle=r.subtitle,t.current={},t.slideArray=[],t.isCurrent=!0,t.activeSlide=r.activeSlide,t.maxVisible=r.maxVisible,t.lastVisible=r.lastVisible}var r={controllerName:"UpdatesTMI",title:"The Multiply Initiative",subtitle:"Meditations",postHeading:"Meditations",maxVisible:15,lastVisible:15,activeSlide:0,updateLabel:"$$$Meditations"};t.loadSlide=function(e){t.activeSlide=e},t.loadArchives=function(){t.isCurrent=!1,t.maxVisible=t.slideArray.length-t.maxVisible,t.lastVisible=t.slideArray.length},t.loadCurrent=function(){t.isCurrent=!0,t.maxVisible=r.maxVisible,t.lastVisible=r.lastVisible},t.switchOption=function(){t.activeSlide=t.currentOption.index},t.$watch("activeSlide",function(e,n){n===e||isNaN(e)||(t.currentOption=t.slideArray[e])});var s={removeContentTags:function(e){var t=e.content;t=t.replace(/&nbsp;/g," "),t=t.replace(/<br \/>|<br>/g,"<br/>");var n=/<div([^>]*)>|<\/div>|<span([^>]*)>|<\/span>|<p([^>]*)>|<\/p>/g;t=t.replace(n,"");var i='<span class="optimus">The Multiply Initiative</span>';t=t.replace(/The Multiply Initiative/g,i),e.content=t},getPostsUpdates:function(n){return a.getLabeledPostRecursive(r.updateLabel).then(function(a){if(n)return e.error(r.controllerName+" "+label,"- STOP Chaining"),!0;var l=a.items[0];return l?(angular.forEach(a.items,function(e){s.removeContentTags(e),o(e)}),a.items.sort(i),a.items.reverse(),angular.forEach(a.items,function(e,n){var i={heading:r.postHeading,index:n,title:e.title,date:e.dateText,content:e.content};t.slideArray.push(i)}),t.currentOption=t.slideArray[0],!1):(e.error("SundaySchoolController:",label,"- null data"),!0)},function(t){e.error(r.controllerName+" "+label,t)})}};l(),a.resetSimpleGet(),s.getPostsUpdates().then(function(){e.debug("Promise Chaining is DONE!!!!")})}]),l.controller("UpdatesUpcoming",["$scope","httpService",function(a,l){var o={controllerName:"UpdatesUpcoming",title:"Upcoming Events",updateLabel:"$$$Upcoming Events"};a.callback=function(){};var r=function(e){e.imgLarge="img/Smushed/upcoming-default.jpg",e.visible=!0;for(var t=0;t<e.labels.length;t++){if(e.title.indexOf("Youth Mission Trip")>-1){e.imgSmall="img/Smushed/upcoming-youth-mission-trip.jpg",e.imgLarge="img/Smushed/upcoming-youth-mission-trip.jpg";break}if(e.title.indexOf("Crawdad")>-1){e.imgSmall="img/Smushed/upcoming-crawdad-small.jpg",e.imgLarge="img/Smushed/upcoming-crawdad.jpg",e.visible=!1;break}if(e.title.indexOf("Summer Lock-In")>-1){e.imgSmall="img/Smushed/upcoming-lock-in.jpg",e.imgLarge="img/Smushed/upcoming-lock-in.jpg";break}if("Evangelism"===e.labels[t]){e.imgSmall="img/Smushed/upcoming-evangelism.jpg",e.imgLarge="img/Smushed/upcoming-evangelism.jpg";break}if("Afterglow"===e.labels[t])break;if("Afterglow"===e.labels[t])break;if("Afterglow"===e.labels[t])break}};a.title=o.title,a.allUpcomingEvents;var s={},c={};l.resetRecursiveGet(),l.getLabeledPostRecursive(o.updateLabel).then(function(l){var o=new Date;angular.forEach(l.items,function(i){var a=i.title.indexOf(":"),l=i.title.substr(0,a),u=i.title.substr(a+1,i.title.length),d=n(l),m=n(l);m.setDate(m.getDate()+1);var p=d.getDate(),g=t(d.getDay()),h=e(d.getMonth()),f=d.getFullYear();i.title=u,i.date=d,i.dateText=g+", "+h+" "+p,r(i),o>m?(c[f]||(c[f]={year:f,events:new Array}),c[f].events.push(i)):f&&(s[f]||(s[f]={year:f,events:new Array}),s[f].events.push(i))}),angular.forEach(s,function(e){e.events.sort(i)}),a.allUpcomingEvents=s},function(e){$log.error(o.controllerName+": "+o.updateLabel,e)})}]);var o=function(i){{var a=i.title.indexOf(":"),l=i.title.substr(0,a),o=i.title.substr(a+1,i.title.length),r=n(l),s=r.getDate(),c=t(r.getDay()),u=e(r.getMonth());r.getFullYear()}i.title=o,i.subtitle=l,i.date=r,i.dateText=c+", "+u+" "+s};l.controller("PodcastsController",["$log","$scope","httpService",function(i,a,l){function o(e){s.src=e,s.load()}function r(){s.play()}angular.element("#audioPlayer").audioPlayer({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"});var s=document.getElementById("audioPlayer");a.callback=function(){},a.playThis=function(e){if(a.allPodcasts&&a.allPodcasts[e]){a.currentSermon=a.allPodcasts[e];var t=a.allPodcasts[e].dblink;o(t),a.prevSlide(),r()}},a.searchTypes=[{type:"By Title"},{type:"By Speaker"},{type:"By Series"}],a.searchType=a.searchTypes[0],a.show={title:!0,speaker:!1,series:!1},a.switchType=function(){switch(a.show.title=!1,a.show.speaker=!1,a.show.series=!1,a.searchType.type){case"By Title":a.show.title=!0;break;case"By Speaker":a.show.speaker=!0;break;case"By Series":a.show.series=!0}};var c="$Podcasts";a.title=c.substr(1,c.length),a.allPodcasts={},l.resetSimpleGet(),l.getLabeledPost(c).then(function(i){if(i.items[0]){var l=i.items[0].content,r=l.toString();if(r){var s=JSON.parse(r);s&&(angular.forEach(s,function(i){var a=n(i.date);i.dayNumber=a.getDate(),i.day=t(a.getDay()),i.month=e(a.getMonth()),isNaN(i.dayNumber)?(i.month="No Date",i.dayNumber="",i.day=""):i.date=i.month+" "+i.dayNumber+", "+a.getFullYear()}),a.allPodcasts=s,a.allPodcasts&&(a.currentSermon=a.allPodcasts[0],a.currentSermon&&(o(a.currentSermon.dblink),a.createSwipe())))}}},function(e){i.error("PodcastsController: $Podcasts",e)})}]),l.controller("ContactController",["$log","$scope","httpService",function(e,t,n){n.resetSimpleGet(),n.getLabeledPost("$Contact").then(function(e){if(e.items[0]){var n=e.items[0];t.title=n.title,t.content=n.content}else t.title="Page Error";a()},function(t){e.error("ContactController: $Contact",t)})}]),l.directive("topBarListItems",["$log",function(e){var t=function(t){e.debug("tob-bar-list-item scope",t),t.select=function(e,n){t.selectFn({item:e,topItem:n})}},n={priority:0,template:function(){var e='<ul class="left menu-options"> 						                <li ng-repeat="item in items" 						                	ng-class="{ 					                			active: item.selected, 					                			\'has-dropdown\': item.dropdown 						                	}"> 						                  <a ng-if="!item.dropdown" 						                  	ng-click="select(item)" 						                  	href="{{item.url}}"> 						                  	{{item.name}} 					                  	</a> 						                  <a ng-if="item.dropdown">{{item.name}}</a> 						                  <ul ng-if="item.dropdown" class="dropdown"> 						                    <li ng-repeat="subItem in item.nested" 						                    	ng-class="{ 							                			active: subItem.selected 								                	}"> 						                    	<a ng-click="select(subItem, item)" 						                    		href="{{subItem.url}}"> 						                    		{{subItem.name}} 					                    		</a> 					                    	</li> 						                  </ul> 						                </li> 					                </ul>';return e},transclude:!1,restrict:"A",scope:{items:"=",selectFn:"&"},compile:function(){return t}};return n}]),l.directive("offCanvasListItems",["$log",function(e){var t=function(t){e.debug("off-canvas-list-item scope",t),t.select=function(e,n){t.selectFn({item:e,topItem:n})}},n={priority:0,template:function(){var e='<ul class="off-canvas-list"> 									          <li><label>Multiply Student Ministry</label></li> 									          <li ng-repeat="item in items" ng-class="{ \'has-submenu\': item.dropdown }"> 									            <a ng-if="!item.dropdown" ng-click="select(item)" href="{{item.url}}">{{ item.name }}</a> 									            <a ng-if="item.dropdown">{{ item.name }}</a> 									            <ul ng-if="item.dropdown" class="left-submenu"> 									              <li class="back"><a>Back</a></li> 									              <li><label>{{ item.name }}</label></li> 									              <li ng-repeat="subItem in item.nested"> 									              	<a ng-click="select(subItem, item)" href="{{ subItem.url }}"> 									              		{{ subItem.name }} 								              		</a> 								              	</li> 									            </ul> 									          </li> 									        </ul>';return e},transclude:!1,restrict:"A",scope:{items:"=",selectFn:"&"},compile:function(){return t}};return n}]),l.directive("infiniteSwipe",["$log","$compile",function(e){var t=function(t,n){e.debug("infinite-swipe scope",t);var i=500,a=!0,l=!0,o={carousel:null,minLength:t.minLength,init:function(){n.height(t.fixedHeight?t.fixedHeight:i),o.carousel=new SwipeView(t.swipeElement[0],{numberOfPages:t.slides.length,hastyPageFlip:!0,loop:!1}),t.swipeElement[0].style.overflowX="hidden",t.swipeElement[0].style.overflowY="scroll",o.loadInitialData(),o.carousel.onFlip(o.onFlipHandler)},loadInitialData:function(){for(var e=0;3>e;e++){var n;n=0===e?t.slides.length:e-1;var i=document.createElement("div");i.className="infiniteSwipe",o.setSlideContent(i,t.slides[n]),0===n&&(t.heading=t.slides[n].heading),o.carousel.masterPages[e].appendChild(i)}},onFlipHandler:function(){for(var e,n,i=0;3>i;i++)n=o.carousel.masterPages[i].dataset.upcomingPageIndex,n!=o.carousel.masterPages[i].dataset.pageIndex&&(e=o.carousel.masterPages[i].querySelector("div"),o.setSlideContent(e,t.slides[n]));a&&!t.$$phase?t.$apply(function(){t.heading=t.slides[o.carousel.pageIndex].heading,t.activeIndex=o.carousel.pageIndex,l=!1}):(t.heading=t.slides[o.carousel.pageIndex].heading,t.activeIndex=o.carousel.pageIndex,a=!0)},setSlideContent:function(e,t){if(t){var n="<h2>"+t.title+"</h2>",i="<h3>"+t.date+"</h3>";e.innerHTML=n+i+t.content}}},r=!1;t.$watchCollection("slides",function(e){e&&e.length>=o.minLength&&(o.init(),r&&($("#swipeview-masterpage-1").append(t.compiledElem),r=!1))}),t.$watch("activeIndex",function(e){l&&!isNaN(e)&&t.slides.length>=o.minLength&&(a=!1,s(e)),l=!0}),t.$watch("compiledElem",function(e){e&&(r=!0)});var s=function(e){o.carousel.goToPage(e)};t.nextSlide=function(){o.carousel.next()},t.prevSlide=function(){o.carousel.prev()},$(document).keyup(function(e){37===e.which&&t.prevSlide(),39===e.which&&t.nextSlide()})},n={priority:0,template:function(){var e='<div style="height: 100%;"> 	    											<div class="clearfix" style="height: 112px;"> 												      <a class="no-text-select left" ng-click="prevSlide()"><i class="fi-arrow-left" style="color: #ff2701; font-size: 3em;"></i></a> 												      <a class="no-text-select right" ng-click="nextSlide()"><i class="fi-arrow-right" style="color: #ff2701; font-size: 3em;"></i></a> 												      <h1 class="text-center" style="margin: 0;">{{ heading }}</h1> 												      <h2 class="hide-for-touch text-center" style="margin: 0;"><small>Use arrow keys to navigate</small></h2> 												      <h2 class="show-for-touch text-center" style="margin: 0;"><small>Swipe or use arrow keys to navigate</small></h2> 												    </div> 	      										<div style="height: calc(100% - 112px); 	      											padding: 1.25rem; 											      	border-style: solid; 											      	border-width: 1px; 											      	border-color: #d9d9d9; 											      	background-color: #f2f2f2;"> 											      	<div ng-scope-element="swipeElement" 											      		style="height: 100%; 											      		-webkit-overflow-scrolling: touch; 											      		overflow-x: hidden !important; 											      		overflow-y: scroll !important;"> 										      		</div> 									      		</div>       										</div>';return e},transclude:!1,restrict:"A",scope:{slides:"=",minLength:"=",activeIndex:"=",fixedHeight:"=",compiledElem:"="},compile:function(){return t}};return n}]),l.directive("swipejs",function(){return function(e,t){e.createSwipe=function(){e.swipe=Swipe(t[0],{startSlide:0,speed:400,auto:0,continuous:!1,disableScroll:!1,stopPropagation:!1,callback:function(){},transitionEnd:function(t){e.callback(t)}})},e.prevSlide=function(){e.swipe.prev()},e.nextSlide=function(){e.swipe.next()},$(document).keyup(function(t){37===t.which&&e.prevSlide(),39===t.which&&e.nextSlide()})}}),l.directive("swipeEvent",function(){return{restrict:"A",link:function(e,t){var n=!0;e.createSwipe=function(){e.swipe=Swipe(t[0],{startSlide:0,speed:400,auto:0,continuous:!1,disableScroll:!1,stopPropagation:!0,callback:function(){},transitionEnd:function(){}})},e.createSwipe(),e.toggle=function(){n?e.swipe.next():e.swipe.prev(),n=!n},e.prevSlide=function(){e.swipe.prev()},e.nextSlide=function(){e.swipe.next()}}}}),l.directive("backImg",function(){return{restrict:"A",link:function(e,t,n){var i=n.backImg;e.setImg=function(){t.css({"background-image":"url("+i+")"})},e.setImg()}}}),l.directive("newsItem",function(){return{restrict:"E",template:'<div class="expand-on-small panel hero shadowed-image"><div class="small-12 large-12 columns"><h3>{{news.title}}</h3><h4>{{news.dateText}}</h4><br/></div><div class="row transparent"><div class="small-12 large-12 columns"><div ng-bind-html="news.content" class="panel shadowed-image"></div></div></div></div>',replace:!0,link:function(){}}}),l.directive("weeklyEvent",["$http","$compile","$location",function(e,t,n){return{restrict:"E",template:"<div></div>",controller:"weeklyController",link:function(i,a){var l=n.$$hash,o="html/"+l+".html";"biblestudy"===l?(i.isBibleStudy=!0,i.isSundaySchool=!1):"sundayschool"===l&&(i.isBibleStudy=!1,i.isSundaySchool=!0),e.get(o).then(function(e){var n=e.data;a.html(n),t(a.contents())(i)}),i.$watch("url",function(n){n&&e.get(n).then(function(e){var n=e.data;a.html(n),t(a.contents())(i)})})}}}]),l.directive("podcast",function(){return{restrict:"E",template:'<div class="podcasts small-12 large-12 columns panel shadowed-image"><div class="small-12 large-2 columns"><a href="#" class="button"><i class="foundiconacc-speaker"></i> Listen </a></div><div class="small-12 large-2 columns"><p>August 13, 2013</p></div><div class="small-12 large-6 columns"><h3>Nathan Ramirez</h3><h2>Final Camp Exhortation</h2></div><div class="small-12 large-2 columns"><a href="Nathan Camp Final Exortation.mp3"><i class="foundicongen-inbox"></i> Download </a></div></div>',link:function(){}}}),l.directive("chosenPodcast",function(){return{restrict:"E",template:'<div style="height: 300px; background: #f5f4f0 url(\'img/Smushed/podcasts-art.jpg\') center top repeat-y; background-size: cover"><div class="small-12 medium-6 columns" style="height: 300px; overflow-y: scroll; color: #fff;"><h3 style="color: #fff;">{{currentSermon.title}}</h3><h4 style="color: #fff;">{{currentSermon.speaker}}</h4><h4 style="color: #fff;">{{currentSermon.series}}</h4><p>{{currentSermon.date}}</p><p><strong>Passage/Topic: {{currentSermon.passage}}</strong></p><p class="show-for-small">{{currentSermon.description}}</p></div><div class="hide-for-small small-12 medium-6 columns" style="height: 300px; overflow-y: scroll; color: #fff;"><p>{{currentSermon.description}}</p></div></div>',link:function(){}}}),l.directive("ngScopeElement",function(){var e={restrict:"A",compile:function(){return{pre:function(e,t,n){e[n.ngScopeElement]=t}}}};return e}),l.controller("FeedCtrl",["$scope","httpService",function(e,t){e.loadButonText="Load",e.posts,t.getBlogPosts().success(function(t){console.log("posts",t),e.posts=t.items}).error(function(){}),t.getBlog().success(function(t){console.log("blog",t.items),e.blog=t.items}).error(function(){})}]),l.service("httpService",["$log","$http","$q",function(e,t,n){var i=this,a="AIzaSyBwh5B3d-nVf8Ut6mf690Id5miFFQ01s0M",l="1357003820482584675";i.getBlog=function(){var e="https://www.googleapis.com/blogger/v3/blogs/"+l+"?key="+a+"&callback=JSON_CALLBACK";return t.jsonp(e)},i.getBlogPosts=function(){var e="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxPosts=9999&key="+a+"&callback=JSON_CALLBACK";return t.jsonp(e)};var o={deferred:null,mainLabel:"",container:{items:new Array},getPost:function(){var n="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxResults=20&labels="+o.mainLabel+"&fields=nextPageToken,items(title,published,labels,content)&key="+a+"&callback=JSON_CALLBACK";t.jsonp(n).success(function(e){o.container.items.push.apply(o.container.items,e.items),o.deferred.resolve(o.container)}).error(function(t){e.error("httpService: simpleGet",t)})},resetGet:function(){o.deferred=n.defer(),o.mainLabel="",o.container={items:new Array}}};i.getLabeledPost=function(e){return o.resetGet(),o.deferred=n.defer(),o.mainLabel=e,o.getPost(),o.deferred.promise},i.resetSimpleGet=function(){o.resetGet()};var r={deferred:null,mainLabel:"",container:{items:new Array},getPost:function(e,n){var i="https://www.googleapis.com/blogger/v3/blogs/"+l+"/posts?maxResults=20";n&&(i+="&pageToken="+n),i+="&labels="+r.mainLabel+"&fields=nextPageToken,items(title,published,labels,content)&key="+a+"&callback=JSON_CALLBACK",t.jsonp(i).success(function(e){r.container.items.push.apply(r.container.items,e.items),e.nextPageToken?r.getPost(r.mainLabel,e.nextPageToken):r.deferred.resolve(r.container)}).error(function(){})},resetGet:function(){r.deferred=n.defer(),r.mainLabel="",r.container={items:new Array}}};i.getLabeledPostRecursive=function(e){return r.resetGet(),r.deferred=n.defer(),r.mainLabel=e,r.getPost(),r.deferred.promise},i.resetRecursiveGet=function(){r.resetGet()}}]),l.controller("SlidesController",function(){console.log("SlidesController"),$(function(){console.log("run after doc load")})}),l.controller("JoyrideController",["$scope",function(e){e.tour=function(){console.log("joyride controller working!")}}]),l.controller("InitializeController",[function(){$(document).foundation()}]),l.controller("HomeController",["$scope","httpService",function(l,o){var r="$$Upcoming Ministry Events",s={};l.nextEvent,o.getLabeledPostRecursive(r).then(function(i){var a=new Date;angular.forEach(i.items,function(i){var l=i.title.indexOf(":"),o=i.title.substr(0,l),r=i.title.substr(l+1,i.title.length),c=n(o),u=c.getDate(),d=t(c.getDay()),m=e(c.getMonth()),p=c.getFullYear();i.title=r,i.date=c,i.dateText=d+", "+m+" "+u,a>c||p&&(s[c]||(s[c]=i))});var o;angular.forEach(s,function(e){o?o>e.date&&(o=e.date):o=e.date}),l.nextEvent=s[o]}).then(function(){o.resetRecursiveGet();var r="$News/Updates";l.currentNews;var s=(new Array,new Array),c=(new Array,{0:{title:"Current News/Updates",data:{}}});o.resetRecursiveGet(),o.getLabeledPostRecursive(r).then(function(o){var r=new Date;angular.forEach(o.items,function(i){{var a=i.title.indexOf(":"),l=i.title.substr(0,a),o=i.title.substr(a+1,i.title.length),c=n(l),u=c.getDate(),d=t(c.getDay()),m=e(c.getMonth());c.getFullYear()}if(i.title=o,i.date=c,i.dateText="For "+d+", "+m+" "+u,i.labels.indexOf("Sunday School Update")>=0||i.labels.indexOf("Bible Study Update")>=0){var p=new Date(i.date.getTime()-6048e5);i.date=p}var g=new Date(i.date.getTime()+6912e5),h=new Date(i.date.getTime()+864e5);i.date>r||r>g||(i.labels.indexOf("Sunday School Update")>=0||i.labels.indexOf("Bible Study Update")>=0?r>h&&s.push(i):s.push(i))}),c[0].data=s,angular.forEach(c,function(e){e.data.sort(i),e.data.reverse()}),l.currentNews=c[0].data,angular.element(document).foundation("orbit",{});var u=angular.element(".orbit-container img").first().height()+20;angular.element(".orbit-slides-container").css({"min-height":u}),a()})})}]),l.controller("BibleStudyController",["$log","$scope","httpService",function(e,t,n){t.options=[{value:0,title:"temp",content:"temp"},{value:1,title:"temp",content:"temp"}],t.switchOption=function(){null!=t.currentOption&&(0===t.currentOption.value?t.getBibleStudyTemplate():1===t.currentOption.value&&t.getSundaySchoolTemplate(),t.swipe.slide(t.currentOption.value))},t.callback=function(e){t.currentOption=t.options[e],t.$$phase||t.$apply()};var i,a,l={bibleStudy:{},sundaySchool:{}};n.resetSimpleGet(),n.getLabeledPost("$$Weekly Ministries").then(function(e){if(e.items[0]&&e.items[1]){var n=e.items[0].labels[0];if("$$"!==n.substr(0,2))return t.title="Page Error","";t.title="Weekly Bible Study","Weekly Bible Study"===e.items[0].title?(i=e.items[0],a=e.items[1]):(i=e.items[1],a=e.items[0]),l.sundaySchool.title=a.title,l.sundaySchool.content=a.content,l.bibleStudy.title=i.title,l.bibleStudy.content=i.content,t.getBibleStudyTemplate(),t.options[0].title=a.title,t.options[0].content=a.content,t.options[0].img="img/Smushed/weekly-2-banner.jpg",t.options[0].mapLink="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",t.options[0].mapImg="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",t.options[1].title=i.title,t.options[1].content=i.content,t.options[1].img="img/Smushed/weekly-1-banner.jpg",t.options[1].mapLink="https://maps.google.com/maps?q=24724+aldine+westfield,+spring+TX,+77373&hl=en&ll=30.065213,-95.401046&spn=0.010047,0.01457&sll=31.168934,-100.076842&sspn=10.762073,12.436523&hnear=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&t=m&z=16",t.options[1].mapImg="http://maps.googleapis.com/maps/api/staticmap?center=1411+kennoway+park,+Spring+TX,+77379&zoom=14&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C1411+kennoway+park,+Spring+TX,+77379&sensor=false",t.currentOption=t.options[0]}else t.title="Page Error"},function(t){e.error("WeeklyController: $$Weekly Ministries",t)}),t.getBibleStudyTemplate=function(){t.image="img/Smushed/weekly-1-banner.jpg",t.subtitle=l.bibleStudy.title,t.content=l.bibleStudy.content,t.mapLink="https://maps.google.com/maps?q=1411+kennoway+park,+Spring+TX,+77379&hl=en&sll=31.168934,-100.076842&sspn=10.237092,8.76709&hnear=1411+Kennoway+Park+Dr,+Spring,+Texas+77379&t=m&z=16",t.mapImg="http://maps.googleapis.com/maps/api/staticmap?center=1411+kennoway+park,+Spring+TX,+77379&zoom=14&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C1411+kennoway+park,+Spring+TX,+77379&sensor=false",t.isBibleStudy=!0,t.isSundaySchool=!1},t.getSundaySchoolTemplate=function(){t.image="img/Smushed/weekly-2-banner.jpg",t.subtitle=l.sundaySchool.title,t.content=l.sundaySchool.content,t.mapLink="https://maps.google.com/maps?q=24724+aldine+westfield,+spring+TX,+77373&hl=en&ll=30.065213,-95.401046&spn=0.010047,0.01457&sll=31.168934,-100.076842&sspn=10.762073,12.436523&hnear=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&t=m&z=16",t.mapImg="http://maps.googleapis.com/maps/api/staticmap?center=24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&zoom=13&size=600x300&maptype=roadmap&markers=color:red%7Ccolor:red%7Clabel:A%7C24724+Aldine+Westfield+Rd,+Spring,+Texas+77373&sensor=false",t.isBibleStudy=!1,t.isSundaySchool=!0}}])}();